{"remainingRequest":"/home/ubuntu/workspace/web/node_modules/thread-loader/dist/cjs.js!/home/ubuntu/workspace/web/node_modules/babel-loader/lib/index.js!/home/ubuntu/workspace/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/ubuntu/workspace/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/workspace/web/src/components/upload/uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ubuntu/workspace/web/src/components/upload/uploadImg.vue","mtime":1648052320000},{"path":"/home/ubuntu/workspace/web/babel.config.js","mtime":1646407314000},{"path":"/home/ubuntu/workspace/web/node_modules/cache-loader/dist/cjs.js","mtime":1725533577608},{"path":"/home/ubuntu/workspace/web/node_modules/thread-loader/dist/cjs.js","mtime":1725533577605},{"path":"/home/ubuntu/workspace/web/node_modules/babel-loader/lib/index.js","mtime":1725533578244},{"path":"/home/ubuntu/workspace/web/node_modules/cache-loader/dist/cjs.js","mtime":1725533577608},{"path":"/home/ubuntu/workspace/web/node_modules/vue-loader/lib/index.js","mtime":1725533578346}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3VidW50dS93b3Jrc3BhY2Uvd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovKiBlc2xpbnQtZGlzYWJsZSAqLwpmdW5jdGlvbiBnZXRCYXNlNjQoZmlsZSkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwoKICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByZXNvbHZlKHJlYWRlci5yZXN1bHQpOwogICAgfTsKCiAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTsKICAgIH07CiAgfSk7Cn0KCmltcG9ydCB7IHVwbG9hZEFjdGlvbiB9IGZyb20gJ0AvcmVxdWVzdC9odHRwLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ3ZhbHVlJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByZXZpZXdWaXNpYmxlOiBmYWxzZSwKICAgICAgcHJldmlld0ltYWdlOiAnJywKICAgICAgZmlsZUxpc3Q6IFsvLyB7CiAgICAgICAgLy8gICB1aWQ6ICctMScsCiAgICAgICAgLy8gICBuYW1lOiAnaW1hZ2UucG5nJywKICAgICAgICAvLyAgIHN0YXR1czogJ2RvbmUnLAogICAgICAgIC8vICAgdXJsOiJodHRwczovL2tlZXBlci1kZXYub3NzLWNuLXNoYW5naGFpLmFsaXl1bmNzLmNvbS85NTk5YjBmZC1iZTk1LTQ4ZDEtYTMwOS02ZjEwYTk4YWI2YTUucG5nIgogICAgICAgIC8vIH0KICAgICAgXQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICBjb25zb2xlLmxvZygndmFsJywgdmFsKTsKICAgICAgdGhpcy5maWxlTGlzdCA9IFt7CiAgICAgICAgdWlkOiAnLTEnLAogICAgICAgIG5hbWU6ICdpbWFnZS5wbmcnLAogICAgICAgIHN0YXR1czogJ2RvbmUnLAogICAgICAgIHVybDogdmFsCiAgICAgIH1dOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMucHJldmlld1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZChlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZm9ybURkYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EZGF0YS5hcHBlbmQoJ2ZpbGUnLCBlLmZpbGUpOwogICAgICBmb3JtRGRhdGEuYXBwZW5kKCd0eXBlJywgJ3N3aXBlcicpOwogICAgICB1cGxvYWRBY3Rpb24oJ3VwbG9hZCcsIGZvcm1EZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgIF90aGlzLmZpbGVMaXN0ID0gW3sKICAgICAgICAgICAgdWlkOiAnLTEnLAogICAgICAgICAgICBuYW1lOiAnaW1hZ2UucG5nJywKICAgICAgICAgICAgc3RhdHVzOiAnZG9uZScsCiAgICAgICAgICAgIHVybDogcmVzLnBhdGgKICAgICAgICAgIH1dOwoKICAgICAgICAgIF90aGlzLiRlbWl0KCdjaGFuZ2UnLCByZXMucGF0aCk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmlofku7bkuIrkvKDlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVByZXZpZXc6IGZ1bmN0aW9uIGhhbmRsZVByZXZpZXcoZmlsZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoIWZpbGUudXJsICYmICFmaWxlLnByZXZpZXcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRCYXNlNjQoZmlsZS5vcmlnaW5GaWxlT2JqKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgZmlsZS5wcmV2aWV3ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3RoaXMyLnByZXZpZXdJbWFnZSA9IGZpbGUudXJsIHx8IGZpbGUucHJldmlldzsKICAgICAgICAgICAgICAgIF90aGlzMi5wcmV2aWV3VmlzaWJsZSA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZW1vdmVJbWc6IGZ1bmN0aW9uIHJlbW92ZUltZygpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbewogICAgICAgIHVpZDogJy0xJywKICAgICAgICBuYW1lOiAnaW1hZ2UucG5nJywKICAgICAgICBzdGF0dXM6ICdkb25lJywKICAgICAgICB1cmw6IHRoaXMudmFsdWUKICAgICAgfV07CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACAA;;AACAA;AAAA;AAAA;;AACAA;AAAA;AAAA;AACA,GALA;AAMA;;AACA;AACA;AACAC,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,2BADA;AAEAC,sBAFA;AAGAC,iBACA;AACA;AACA;AACA;AACA;AACA;AANA;AAHA;AAYA,GAfA;AAgBAC;AACAC,SADA,mBACA;AAAA;AACAC;AACA;AACAC,iBADA;AAEAC,yBAFA;AAGAC,sBAHA;AAIAC;AAJA;AAMA;AATA,GAhBA;AA2BAC;AACAC,gBADA,0BACA;AACA;AACA,KAHA;AAIAC,gBAJA,wBAIAC,CAJA,EAIA;AAAA;;AACA;AACAC;AACAA;AACAC,wCACAC,IADA,CACA;AACA;AACA;AACAV,qBADA;AAEAC,6BAFA;AAGAC,0BAHA;AAIAC;AAJA;;AAMA;;AACA;AACA,SATA,MASA;AACA;AACA;AAEA,OAfA;AAgBA,KAxBA;AAyBAQ,iBAzBA,yBAyBAC,IAzBA,EAyBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,0BADA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEAC,6BAFA;;AAAA;AAEAD,4BAFA;;AAAA;AAIA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,KA/BA;AAgCAE,aAhCA,uBAgCA;AACA;AACA;AAlCA,GA3BA;AA+DAC,SA/DA,qBA+DA;AACA;AACA;AACAf,iBADA;AAEAC,yBAFA;AAGAC,sBAHA;AAIAC;AAJA;AAMA;AACA;AAxEA","names":["reader","props","data","previewVisible","previewImage","fileList","watch","value","console","uid","name","status","url","methods","handleCancel","handleUpload","e","formDdata","uploadAction","then","handlePreview","file","getBase64","removeImg","mounted"],"sourceRoot":"src/components/upload","sources":["uploadImg.vue"],"sourcesContent":["<template>\r\n  <div class=\"clearfix\">\r\n    <a-upload\r\n      :file-list=\"fileList\"\r\n      list-type=\"picture-card\"\r\n      :custom-request=\"handleUpload\"\r\n      @preview=\"handlePreview\"\r\n      :remove=\"removeImg\">\r\n      <div v-if=\"fileList.length < 1\">\r\n        <a-icon type=\"plus\" />\r\n        <div class=\"ant-upload-text\">\r\n          Upload\r\n        </div>\r\n      </div>\r\n    </a-upload>\r\n    <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\n/* eslint-disable */\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\nimport {uploadAction} from '@/request/http.js'\r\nexport default {\r\n  props:['value'],\r\n  data () {\r\n    return {\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList: [\r\n        // {\r\n        //   uid: '-1',\r\n        //   name: 'image.png',\r\n        //   status: 'done',\r\n        //   url:\"https://keeper-dev.oss-cn-shanghai.aliyuncs.com/9599b0fd-be95-48d1-a309-6f10a98ab6a5.png\"\r\n        // }\r\n      ]\r\n    }\r\n  },\r\n  watch: {\r\n    value(val = {}) {\r\n      console.log('val',val)\r\n      this.fileList = [{\r\n        uid: '-1',\r\n        name: 'image.png',\r\n        status: 'done',\r\n        url:val\r\n      }]\r\n    },\r\n  },\r\n  methods: {\r\n    handleCancel () {\r\n      this.previewVisible = false\r\n    },\r\n    handleUpload (e) {\r\n      const formDdata = new FormData()\r\n      formDdata.append('file', e.file)\r\n      formDdata.append('type','swiper')\r\n      uploadAction('upload', formDdata)\r\n        .then((res) => {\r\n          if(res.code == 0){\r\n            this.fileList = [{\r\n              uid: '-1',\r\n              name: 'image.png',\r\n              status: 'done',\r\n              url:res.path\r\n            }]\r\n            this.$emit('change',res.path)\r\n            return ;\r\n          }else{\r\n            this.$message.warning('文件上传失败')\r\n          }\r\n          \r\n        })\r\n    },\r\n    async handlePreview(file) {\r\n      if (!file.url && !file.preview) {\r\n        file.preview = await getBase64(file.originFileObj);\r\n      }\r\n      this.previewImage = file.url || file.preview;\r\n      this.previewVisible = true;\r\n    },\r\n    removeImg(){\r\n      this.fileList = [];\r\n    }\r\n  },\r\n  mounted(){\r\n    if(this.value){\r\n      this.fileList = [{\r\n        uid: '-1',\r\n        name: 'image.png',\r\n        status: 'done',\r\n        url:this.value\r\n      }]\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n/* you can make up upload button and sample style by using stylesheets */\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n</style>"]}]}