{"remainingRequest":"/home/ubuntu/workspace/web/node_modules/thread-loader/dist/cjs.js!/home/ubuntu/workspace/web/node_modules/babel-loader/lib/index.js!/home/ubuntu/workspace/web/src/request/request.js","dependencies":[{"path":"/home/ubuntu/workspace/web/src/request/request.js","mtime":1646565066000},{"path":"/home/ubuntu/workspace/web/babel.config.js","mtime":1646407314000},{"path":"/home/ubuntu/workspace/web/node_modules/cache-loader/dist/cjs.js","mtime":1725533577608},{"path":"/home/ubuntu/workspace/web/node_modules/thread-loader/dist/cjs.js","mtime":1725533577605},{"path":"/home/ubuntu/workspace/web/node_modules/babel-loader/lib/index.js","mtime":1725533578244}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB2dWUgZnJvbSAndnVlJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvdnVleC5qcyc7CmltcG9ydCB7IE1vZGFsLCBub3RpZmljYXRpb24gfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7CnZhciByZXF1ZXN0ID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMLAogIHRpbWVvdXQ6IDYwMDAwCn0pOwpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CgogIGlmICh0b2tlbikgewogICAgY29uZmlnLmhlYWRlcnMudG9rZW4gPSB0b2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7CnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICB2YXIgY29kZSA9IHJlc3BvbnNlLmRhdGEuY29kZTsKCiAgaWYgKGNvZGUgPT0gMCB8fCBjb2RlID09IC0xIHx8ICFjb2RlKSB7CiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICB9IGVsc2UgaWYgKGNvZGUgPT0gLTIpIHsKICAgIE1vZGFsLmVycm9yKHsKICAgICAgdGl0bGU6ICfnmbvlvZXlt7Lov4fmnJ8nLAogICAgICBjb250ZW50OiAn5b6I5oqx5q2J77yM55m75b2V5bey6L+H5pyf77yM6K+36YeN5paw55m75b2VJywKICAgICAgb2tUZXh0OiAn6YeN5paw55m75b2VJywKICAgICAgbWFzazogZmFsc2UsCiAgICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7CiAgICAgICAgc3RvcmUuY29tbWl0KCdyZW1vdmVwZXJtaXNzaW9uJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9CiAgICB9KTsKICB9Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICBub3RpZmljYXRpb24ub3Blbih7CiAgICBtZXNzYWdlOiAn6ZSZ6K+v5o+Q56S6JywKICAgIGRlc2NyaXB0aW9uOiAn572R57uc6K+35rGC6ZSZ6K+v77yM6K+356iN5ZCO6YeN6K+VJywKICAgIGR1cmF0aW9uOiA0LjUKICB9KTsKfSk7CmV4cG9ydCBkZWZhdWx0IHJlcXVlc3Q7"},{"version":3,"sources":["/home/ubuntu/workspace/web/src/request/request.js"],"names":["axios","vue","store","Modal","notification","request","create","baseURL","process","env","VUE_APP_BASE_URL","timeout","interceptors","use","config","token","localStorage","getItem","headers","err","Promise","reject","response","code","data","error","title","content","okText","mask","onOk","commit","removeItem","window","location","reload","open","message","description","duration"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,SAAQC,KAAR,EAAcC,YAAd,QAAiC,gBAAjC;AAEA,IAAMC,OAAO,GAAIL,KAAK,CAACM,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAACC,OAAO,CAACC,GAAR,CAAYC,gBADQ;AAE5BC,EAAAA,OAAO,EAAC;AAFoB,CAAb,CAAjB;AAIAN,OAAO,CAACO,YAAR,CAAqBP,OAArB,CAA6BQ,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACzC,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAGF,KAAH,EAAS;AACPD,IAAAA,MAAM,CAACI,OAAP,CAAeH,KAAf,GAAuBA,KAAvB;AACD;;AACD,SAAOD,MAAP;AACD,CAND,EAMG,UAAAK,GAAG,EAAI;AACR,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CARD;AASAd,OAAO,CAACO,YAAR,CAAqBU,QAArB,CAA8BT,GAA9B,CAAkC,UAAAS,QAAQ,EAAI;AAC5C,MAAIC,IAAI,GAAGD,QAAQ,CAACE,IAAT,CAAcD,IAAzB;;AACA,MAAIA,IAAI,IAAI,CAAR,IAAaA,IAAI,IAAI,CAAC,CAAtB,IAA2B,CAACA,IAAhC,EAAqC;AACnC,WAAOD,QAAQ,CAACE,IAAhB;AACD,GAFD,MAEM,IAAID,IAAI,IAAI,CAAC,CAAb,EAAe;AACnBpB,IAAAA,KAAK,CAACsB,KAAN,CAAY;AACVC,MAAAA,KAAK,EAAE,OADG;AAEVC,MAAAA,OAAO,EAAE,iBAFC;AAGVC,MAAAA,MAAM,EAAE,MAHE;AAIVC,MAAAA,IAAI,EAAE,KAJI;AAKVC,MAAAA,IAAI,EAAE,gBAAM;AACV5B,QAAAA,KAAK,CAAC6B,MAAN,CAAa,kBAAb;AACAf,QAAAA,YAAY,CAACgB,UAAb,CAAwB,OAAxB;AACAC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD;AATS,KAAZ;AAWD;AACF,CAjBD,EAiBE,UAAAhB,GAAG,EAAE;AACLf,EAAAA,YAAY,CAACgC,IAAb,CAAkB;AAChBC,IAAAA,OAAO,EAAE,MADO;AAEhBC,IAAAA,WAAW,EACT,cAHc;AAIhBC,IAAAA,QAAQ,EAAE;AAJM,GAAlB;AAMD,CAxBD;AAyBA,eAAelC,OAAf","sourcesContent":["import axios from 'axios'\r\nimport vue from 'vue'\r\nimport store from '@/store/vuex.js'\r\nimport {Modal,notification} from 'ant-design-vue'\r\n\r\nconst request  = axios.create({\r\n  baseURL:process.env.VUE_APP_BASE_URL,\r\n  timeout:60000\r\n})\r\nrequest.interceptors.request.use(config => {\r\n  let token = localStorage.getItem('token')\r\n  if(token){\r\n    config.headers.token = token\r\n  }\r\n  return config\r\n}, err => {\r\n  return Promise.reject(err)\r\n})\r\nrequest.interceptors.response.use(response => {\r\n  let code = response.data.code;\r\n  if (code == 0 || code == -1 || !code){\r\n    return response.data\r\n  }else if (code == -2){\r\n    Modal.error({\r\n      title: '登录已过期',\r\n      content: '很抱歉，登录已过期，请重新登录',\r\n      okText: '重新登录',\r\n      mask: false,\r\n      onOk: () => {\r\n        store.commit('removepermission')\r\n        localStorage.removeItem('token')\r\n        window.location.reload()\r\n      }\r\n    })\r\n  }\r\n},err=>{\r\n  notification.open({\r\n    message: '错误提示',\r\n    description:\r\n      '网络请求错误，请稍后重试',\r\n    duration: 4.5,\r\n  });\r\n})\r\nexport default request"]}]}