{"remainingRequest":"/home/ubuntu/workspace/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/workspace/web/src/view/keyword/keywordList.vue?vue&type=style&index=0&id=5e2d351e&scoped=true&lang=css&","dependencies":[{"path":"/home/ubuntu/workspace/web/src/view/keyword/keywordList.vue","mtime":1650728280000},{"path":"/home/ubuntu/workspace/web/node_modules/css-loader/dist/cjs.js","mtime":1725533577518},{"path":"/home/ubuntu/workspace/web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1725533578591},{"path":"/home/ubuntu/workspace/web/node_modules/postcss-loader/src/index.js","mtime":1725533578097},{"path":"/home/ubuntu/workspace/web/node_modules/cache-loader/dist/cjs.js","mtime":1725533577608},{"path":"/home/ubuntu/workspace/web/node_modules/vue-loader/lib/index.js","mtime":1725533578346}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmtleXdvcmQgPj4+IGgyIGJ7DQogIGNvbG9yOiByZWQ7DQp9DQoua2V5d29yZCA+Pj4gaDJ7DQogIG1hcmdpbjogMCAhaW1wb3J0YW50Ow0KfQ0KLmFjdGlvbi1hcmVhew0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KfQ0K"},{"version":3,"sources":["keywordList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"keywordList.vue","sourceRoot":"src/view/keyword","sourcesContent":["<template>\r\n  <div style=\"background:inherit;padding:10px;border-radius:5px;color:#8c8c8c\" class=\"keyword\">\r\n    <!-- 条件筛选部分 -->\r\n    <a-form layout=\"inline\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n      <a-row :gutter=\"24\" style=\"line-height:50px\">\r\n        \r\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\r\n          <a-form-item label=\"单词\">\r\n            <a-input placeholder=\"请输入单词\" v-model=\"queryParam.keyword\"></a-input>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\r\n          <a-form-item label=\"单词本\" style=\"width:100%\">\r\n            <a-select v-model=\"queryParam.group_id\">\r\n              <a-select-option v-for=\"row,index in category\" :key=\"index\" :value=\"row.uuid\">\r\n                {{row.name}}\r\n              </a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n        </a-col>\r\n\r\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\r\n          <a-form-item label=\"排序方式\" style=\"width:100%\">\r\n            <a-select v-model=\"queryParam.sort\">\r\n              <a-select-option  value=\"create_time\">\r\n                时间\r\n              </a-select-option>\r\n              <a-select-option  value=\"keyword\">\r\n                关键词\r\n              </a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :xl=\"8\" :lg=\"7\" :md=\"8\" :sm=\"24\">\r\n          <a-form-item label=\"收藏时间\">\r\n            <a-range-picker @change=\"onChange\" v-model=\"queryParam.time\" />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\r\n          <span style=\"float: left;overflow: hidden;display: inline-block;line-height: 40px;\" class=\"table-page-search-submitButtons\">\r\n            <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\r\n            <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n\r\n            <a-button type=\"primary\" @click=\"download\" icon=\"reload\" style=\"margin-left: 8px\">导出</a-button>\r\n\r\n          </span>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form>\r\n    <!-- table部分 -->\r\n    <div style=\"margin-top:10px\">\r\n      <div class=\"action-area\">\r\n        <a-button type=\"primary\" :disabled=\"selectedRowKeys.length <= 0\" style=\"margin-bottom:15px\" @click=\"bulkChange\">批量修改</a-button>\r\n        \r\n        <div style=\"width:15px;\"></div>\r\n        <a-popconfirm\r\n          title=\"请确认是否进行批量删除\"\r\n          ok-text=\"是\"\r\n          cancel-text=\"否\"\r\n          @confirm=\"bulkDelete\"\r\n          :disabled=\"selectedRowKeys.length <= 0\"\r\n        >\r\n          <a-button type=\"primary\" :disabled=\"selectedRowKeys.length <= 0\" style=\"margin-bottom:15px\">批量删除</a-button>\r\n        </a-popconfirm>\r\n        <div style=\"width:15px;\"></div>\r\n\r\n        <!-- <div style=\"margin-bottom:15px\">\r\n          <span style=\"vertical-align: bottom;margin-right: 10px;\">释义:</span>\r\n          <a-switch @change=\"showDefinition\" />\r\n        </div> -->\r\n      </div>\r\n      \r\n      <a-table\r\n        ref=\"table\"\r\n        size=\"middle\"\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :pagination=\"pagination\"\r\n        :loading=\"loading\"\r\n        class=\"j-table-force-nowrap\"\r\n        :row-selection=\"{ selectedRowKeys: selectedRowKeys, onChange: onSelectChange }\"\r\n        @change=\"handleTableChange\">\r\n        <span slot=\"action\" slot-scope=\"text,record\">\r\n          <a @click=\"previewInfo(record)\">查看</a>\r\n          <a-divider type=\"vertical\" />\r\n          <a-dropdown :trigger=\"['click']\">\r\n            <a class=\"ant-dropdown-link\" @click=\"e => e.preventDefault()\">\r\n              更多<a-icon type=\"down\" />\r\n            </a>\r\n            <a-menu slot=\"overlay\">\r\n              <a-menu-item>\r\n                <a href=\"javascript:;\" @click=\"changeCateogry(record)\">修改单词本</a>\r\n              </a-menu-item>\r\n              <a-menu-item>\r\n                <a href=\"javascript:;\" @click=\"changeRemark(record)\">备注设置</a>\r\n              </a-menu-item>\r\n              <a-menu-item >\r\n                <a-popconfirm\r\n                  title=\"是否删除此收藏?\"\r\n                  ok-text=\"是\"\r\n                  cancel-text=\"否\"\r\n                  @confirm=\"confirmDelete(record.id)\"\r\n                >\r\n                  <a href=\"javascript:;\">删除</a>\r\n                </a-popconfirm>\r\n              </a-menu-item>\r\n            </a-menu>\r\n          </a-dropdown>\r\n         \r\n        </span>\r\n\r\n        <span class=\"\" slot=\"heavy\" slot-scope=\"text,record\">\r\n          <span v-html=\"text\"></span>\r\n        </span>\r\n\r\n\r\n        <span slot=\"definition\" slot-scope =\"text,record\">\r\n          <!-- <div v-if=\"definition\">{{text?text.replace(/_/g,'\\r\\n'):''}}</div> -->\r\n          <div v-if=\"definition\">\r\n            <div v-html=\"text.replace(/_/g,'<br>')\"></div>\r\n          </div>\r\n\r\n          <span v-else>*******</span>\r\n        </span>\r\n      </a-table>\r\n    </div>\r\n    <detail-modal ref=\"detailModal\"></detail-modal>\r\n    <tender-modal ref=\"tenderModal\" @refresh=\"refresh\"></tender-modal>\r\n    <remark-model ref=\"markModal\" @refresh=\"getListData\"/>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {listMixins} from '@/mixins/listMixins.js'\r\nimport DetailModal from './modules/detailModal.vue'\r\nimport TenderModal from './modules/tenderModal.vue'\r\nimport RemarkModel from './modules/remarkModal.vue'\r\nimport {getAction,putAction,deleteAction} from '@/request/http.js'\r\nimport { postAction } from '../../request/http'\r\nexport default {\r\n  mixins:[listMixins],\r\n  data(){\r\n    return {\r\n      columns: [\r\n          {\r\n            key:\"1\",\r\n            title:'序号',\r\n            align:\"center\",\r\n            dataIndex: 'id',\r\n            customRender:function(t,r,index){\r\n              return parseInt(index) + 1\r\n            }\r\n          },\r\n          {\r\n            key:\"111\",\r\n            title:'关键词',\r\n            align:\"center\",\r\n            dataIndex: 'keyword',\r\n          },\r\n          {\r\n            key:\"2\",\r\n            title:'重音',\r\n            align:\"center\",\r\n            dataIndex: 'keyword_html',\r\n            scopedSlots:{\r\n              customRender:\"heavy\"\r\n            }\r\n          },\r\n          {\r\n            key:\"3\",\r\n            title:'释义',\r\n            align:\"center\",\r\n            dataIndex: 'definition',\r\n            scopedSlots:{\r\n              customRender:\"definition\"\r\n            }\r\n          },\r\n          {\r\n            key:\"5\",\r\n            title:'单词本',\r\n            align:\"center\",\r\n            dataIndex: 'name',\r\n            customRender:(c)=>{\r\n              return c || '默认'\r\n            }\r\n          },\r\n          \r\n          {\r\n            key:\"9\",\r\n            title:'收藏时间',\r\n            align:\"center\",\r\n            dataIndex: 'create_time'\r\n          },\r\n          {\r\n            key:\"10\",\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align:\"center\",\r\n            width:147,\r\n            scopedSlots: { customRender: 'action' }\r\n          }\r\n      ],\r\n      category:[\r\n        {\r\n          type:'design',\r\n          name:'设计'\r\n        },\r\n        {\r\n          type: 'purchase',\r\n          name: '采购'\r\n        },\r\n        {\r\n          type:\"device\",\r\n          name: '工业设备'\r\n        },\r\n        {\r\n          type:'process',\r\n          name: '加工/处理'\r\n        },\r\n        {\r\n          type: 'soft',\r\n          name:'软件/信息化'\r\n        },\r\n        {\r\n          type:\"zhaopin\",\r\n          name:'招聘'\r\n        }\r\n      ],\r\n      url:{\r\n        list:\"keyword/list\",\r\n        pass:\"task/pass\",\r\n        fail:\"task/fail\",\r\n        effect:\"task/effect\"\r\n      },\r\n      definition:false\r\n    }\r\n  },\r\n  components:{\r\n    DetailModal,\r\n    TenderModal,\r\n    RemarkModel\r\n  },\r\n  created(){\r\n    this.getListData()\r\n    this.$bus.$on('definition',(e)=>{\r\n      console.log('e',e)\r\n      this.definition = e\r\n    })\r\n  },\r\n  mounted(){\r\n    this.getCate()\r\n  },\r\n  methods:{\r\n    onChange(a,b){\r\n      this.queryParam.start_time = b[0]\r\n      this.queryParam.end_time = b[1]\r\n    },\r\n    // 查看数据\r\n    previewInfo(info){\r\n      this.$refs.detailModal.visible = true;\r\n      this.$nextTick(()=>{\r\n        this.$refs.detailModal.showInfo(info)\r\n      })\r\n    },\r\n\r\n    getCate(){\r\n      getAction('category/list',{page:1,size:100}).then(res=>{\r\n        console.log(res)\r\n        this.category = res.result\r\n      })\r\n    },\r\n\r\n    changeCateogry(info){\r\n      this.$refs.tenderModal.visible = true;\r\n      this.$refs.tenderModal.id = [info.id];\r\n      this.$refs.tenderModal.group_id = info.group_id\r\n\r\n      this.$nextTick(()=>{\r\n        this.$refs.tenderModal.getCate()\r\n      })\r\n    },\r\n\r\n    bulkChange(){\r\n      this.$refs.tenderModal.visible = true;\r\n      this.$refs.tenderModal.id = this.selectedRowKeys;\r\n      // this.$refs.tenderModal.group_id = info.group_id\r\n\r\n      this.$nextTick(()=>{\r\n        this.$refs.tenderModal.getCate()\r\n      })\r\n    },\r\n\r\n    confirmDelete(id){\r\n      deleteAction(`keyword/${id}`,{}).then(res=>{\r\n        this.$message.success('删除成功')\r\n        this.getListData()\r\n      })\r\n    },\r\n    bulkDelete(){\r\n      deleteAction(`keyword/delete`,{},this.selectedRowKeys).then(res=>{\r\n        this.selectedRowKeys = []\r\n        this.$message.success('删除成功')\r\n        this.getListData()\r\n      })\r\n    },\r\n    \r\n    download(){\r\n      postAction('download',this.queryParam).then(res=>{\r\n        console.log('res',res)\r\n        window.open(`${process.env.VUE_APP_BASE_URL}download?file_name=${res.file_name}`)\r\n      })\r\n    },\r\n\r\n    \r\n\r\n    refresh(){\r\n      this.selectedRowKeys = [];\r\n      this.getListData()\r\n    },\r\n\r\n    changeRemark(e){\r\n      this.$refs.markModal.visible = true;\r\n      this.$refs.markModal.id = e.id;\r\n\r\n      this.$nextTick(()=>{\r\n        this.$refs.markModal.edit({remark:e.remark})\r\n      })\r\n    }\r\n    \r\n   \r\n    \r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.keyword >>> h2 b{\r\n  color: red;\r\n}\r\n.keyword >>> h2{\r\n  margin: 0 !important;\r\n}\r\n.action-area{\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>"]}]}